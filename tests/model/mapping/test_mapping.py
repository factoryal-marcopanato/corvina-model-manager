
import json
import unittest

from model.mapping.mapping_root import MappingRoot


class MappingRootTestCase(unittest.TestCase):

    def test_deserialization(self):
        corvina_str = '[{"realmId":"factoryal","modelId":"Y0oAkxGwGu","json":{"UUID":"x6fbc8cyvjpft6pw","type":"object","instanceOf":"Dummy:1.0.0","properties":{"dummyBool":{"type":"boolean","version":"1.0.0","mode":"R","historyPolicy":{"enabled":true},"sendPolicy":{"triggers":[{"changeMask":"value","minIntervalMs":1000,"skipFirstNChanges":0,"type":"onchange"}]},"datalink":{"source":"bool"}},"dummyDouble":{"type":"double","version":"1.0.0","mode":"R","historyPolicy":{"enabled":true},"sendPolicy":{"triggers":[{"changeMask":"value","minIntervalMs":1000,"skipFirstNChanges":0,"type":"onchange"}]},"datalink":{"source":"double"}},"dummyNumber":{"type":"integer","version":"1.0.0","mode":"R","historyPolicy":{"enabled":true},"sendPolicy":{"triggers":[{"changeMask":"value","minIntervalMs":1000,"skipFirstNChanges":0,"type":"onchange"}]},"datalink":{"source":"number"}},"dummyString":{"type":"string","version":"1.0.0","mode":"R","historyPolicy":{"enabled":true},"sendPolicy":{"triggers":[{"changeMask":"value","minIntervalMs":1000,"skipFirstNChanges":0,"type":"onchange"}]},"datalink":{"source":"string"}}},"label":"","unit":"","description":"","tags":[]},"name":"DummyMapping","nameRaw":"DummyMapping","deleted":false,"orgResourceId":"factoryal","creationDate":1759243325956,"updatedAt":1759243325956,"id":"AWnQS4LEL8"},{"realmId":"factoryal","modelId":"MImq2ozIab","json":{"UUID":"r05m0v4ssxdkfa9m","unit":"","description":"","label":"","type":"object","properties":{"SGL":{"UUID":"427vc0dmpskir7um","type":"object","instanceOf":"stupefied-galileo-tender-easley-SGL:1.0.0","properties":{"Lab5G":{"UUID":"5x747o1981ijdved","type":"object","instanceOf":"stupefied-galileo-pedantic-gates-Lab5G:1.0.0","properties":{"QC":{"UUID":"s96jh60d6e7ali9t","type":"object","instanceOf":"stupefied-galileo-nice-cray-QC:1.0.0","properties":{"ScreenTesting":{"UUID":"ej88fqoc2ylhhclw","type":"object","instanceOf":"stupefied-galileo-amazing-mcclintock-ScreenTesting:1.0.0","properties":{"TouchTestingMachine":{"UUID":"9uevg1gv1fbjab60","type":"object","instanceOf":"stupefied-galileo-reverent-buck-TouchTestingMachine:1.0.0","properties":{"Power":{"UUID":"4f679kchz82oev48","type":"object","instanceOf":"stupefied-galileo-sad-darwin-Power:1.0.0","properties":{"TotalEnergykWh":{"version":"1.0.0","type":"double","mode":"R","historyPolicy":{"enabled":true},"sendPolicy":{"triggers":[{"changeMask":"value","minIntervalMs":1000,"skipFirstNChanges":0,"type":"onchange"}]},"datalink":{"source":"EXORInternational.SGL.Lab5G.QC.ScreenTesting.TouchTestingMachine.Power.TotalEnergykWh"}}}}}}}}}}}}}}},"instanceOf":"silly-greider-competent-margulis-EXORInternational:1.0.0","tags":[]},"name":"EXORInternational_Mapping","nameRaw":"EXORInternational_Mapping","deleted":false,"orgResourceId":"factoryal","creationDate":1745999019549,"updatedAt":1745999019549,"id":"wUOxxV1uc2"},{"realmId":"factoryal","modelId":"HBiJJzfGxx","json":{"UUID":"z6nlm6ziwmktrqpw","unit":"","description":"","label":"","type":"object","properties":{"SGL":{"UUID":"5t9nzy04s51m7w9d","type":"object","instanceOf":"stupefied-traffic-hungry-faraday-SGL:1.0.0","properties":{"Lab5G":{"UUID":"g9y3f3xh93eishs0","type":"object","instanceOf":"stupefied-traffic-elegant-varahamihira-Lab5G:1.0.0","properties":{"QC":{"UUID":"lhp2ynnzetn77115","type":"object","instanceOf":"stupefied-traffic-condescending-jang-QC:1.0.0","properties":{"ScreenTesting":{"UUID":"ce6tey8vscb69fyb","type":"object","instanceOf":"stupefied-traffic-zealous-ritchie-ScreenTesting:1.0.0","properties":{"TouchTestingMachine":{"UUID":"subimzwgvgljyu9e","type":"object","instanceOf":"stupefied-traffic-trusting-robinson-TouchTestingMachine:1.0.0","properties":{"Power":{"UUID":"p51o6t8n8agnvt15","type":"object","instanceOf":"stupefied-traffic-funny-mendel-Power:1.0.0","properties":{"CurrentPower":{"version":"1.0.0","type":"double","mode":"R","historyPolicy":{"enabled":true},"sendPolicy":{"triggers":[{"changeMask":"value","minIntervalMs":1000,"skipFirstNChanges":0,"type":"onchange"}]},"datalink":{"source":"EXORInternational.SGL.Lab5G.QC.ScreenTesting.TouchTestingMachine.Power.CurrentPower"}},"TotalEnergykWh":{"version":"1.0.0","type":"double","mode":"R","historyPolicy":{"enabled":true},"sendPolicy":{"triggers":[{"changeMask":"value","minIntervalMs":1000,"skipFirstNChanges":0,"type":"onchange"}]},"datalink":{"source":"EXORInternational.SGL.Lab5G.QC.ScreenTesting.TouchTestingMachine.Power.TotalEnergykWh"}}}}}}}}}}}}}}},"instanceOf":"stupefied-traffic-fervent-swirles-EXORInternational:1.0.0","tags":[]},"name":"EXORInternational_Mapping","nameRaw":"EXORInternational_Mapping","deleted":false,"orgResourceId":"factoryal","creationDate":1746428906841,"updatedAt":1746428906841,"id":"lCwrv27BOa"},{"realmId":"factoryal","modelId":"wdxDe8jJ9r","json":{"UUID":"5ylwksfthua3lpzz","unit":"","description":"","label":"","type":"object","properties":{"SGL":{"UUID":"n6zp5m3n5rpr1kjh","type":"object","instanceOf":"vigilant-banach-serene-mclaren-SGL:1.0.0","properties":{"Lab5G":{"UUID":"x8swaqofq1suwxzi","type":"object","instanceOf":"vigilant-banach-modest-leakey-Lab5G:1.0.0","properties":{"QC":{"UUID":"qtpjnw2k32dabdpr","type":"object","instanceOf":"vigilant-banach-hardcore-cerf-QC:1.0.0","properties":{"ScreenTesting":{"UUID":"1bjdswc7387mc34s","type":"object","instanceOf":"vigilant-banach-naughty-mirzakhani-ScreenTesting:1.0.0","properties":{"TouchTestingMachine":{"UUID":"wbp1ubpm8n30yuwl","type":"object","instanceOf":"vigilant-banach-romantic-rosalind-TouchTestingMachine:1.0.0","properties":{"Power":{"UUID":"8c9ogmzrlidnt9dp","type":"object","instanceOf":"vigilant-banach-exciting-neumann-Power:1.0.0","properties":{"CurrentPower":{"version":"1.0.0","type":"double","mode":"R","historyPolicy":{"enabled":true},"sendPolicy":{"triggers":[{"changeMask":"value","minIntervalMs":1000,"skipFirstNChanges":0,"type":"onchange"}]},"datalink":{"source":"EXORInternational.SGL.Lab5G.QC.ScreenTesting.TouchTestingMachine.Power.CurrentPower"}},"TotalEnergykWh":{"version":"1.0.0","type":"double","mode":"R","historyPolicy":{"enabled":true},"sendPolicy":{"triggers":[{"changeMask":"value","minIntervalMs":1000,"skipFirstNChanges":0,"type":"onchange"}]},"datalink":{"source":"EXORInternational.SGL.Lab5G.QC.ScreenTesting.TouchTestingMachine.Power.TotalEnergykWh"}}}}}}}}}}}},"MTS":{"UUID":"ej0pmiefnre9mdr9","type":"object","instanceOf":"vigilant-banach-trusting-villani-MTS:1.0.0","properties":{"BurnIn":{"UUID":"9bx7lwvwafxra52p","type":"object","instanceOf":"vigilant-banach-reverent-austin-BurnIn:1.0.0","properties":{"BurnInOven1":{"UUID":"hcsrzgb904fu2gd7","type":"object","instanceOf":"vigilant-banach-cranky-jepsen-BurnInOven1:1.0.0","properties":{"Oven1":{"UUID":"0jxg73h9i3crspp8","type":"object","instanceOf":"vigilant-banach-unruffled-turing-Oven1:1.0.0","properties":{"Power":{"UUID":"s8fe7m0cx4ke1q69","type":"object","instanceOf":"vigilant-banach-sleepy-cray-Power:1.0.0","properties":{"CurrentPower":{"version":"1.0.0","type":"double","mode":"R","historyPolicy":{"enabled":true},"sendPolicy":{"triggers":[{"changeMask":"value","minIntervalMs":1000,"skipFirstNChanges":0,"type":"onchange"}]},"datalink":{"source":"EXORInternational.SGL.MTS.BurnIn.BurnInOven1.Oven1.Power.CurrentPower"}},"TotalEnergykWh":{"version":"1.0.0","type":"double","mode":"R","historyPolicy":{"enabled":true},"sendPolicy":{"triggers":[{"changeMask":"value","minIntervalMs":1000,"skipFirstNChanges":0,"type":"onchange"}]},"datalink":{"source":"EXORInternational.SGL.MTS.BurnIn.BurnInOven1.Oven1.Power.TotalEnergykWh"}}}}}}}}}}}}}}},"instanceOf":"vigilant-banach-amazing-hamilton-EXORInternational:1.0.0","tags":[]},"name":"EXORInternational_Mapping","nameRaw":"EXORInternational_Mapping","deleted":false,"orgResourceId":"factoryal","creationDate":1746429177617,"updatedAt":1746429177617,"id":"gJfFgChLmm"},{"realmId":"factoryal","modelId":"l5F0De7N1L","json":{"UUID":"uq8xy3d40hbxncur","type":"object","instanceOf":"TestRoot:1.0.0","properties":{"Tt":{"UUID":"kuntppbiddxkizsf","type":"object","instanceOf":"Test:1.0.0","properties":{"num":{"type":"integer","version":"1.0.0","mode":"R","historyPolicy":{"enabled":false},"sendPolicy":{"triggers":[{"changeMask":"value","minIntervalMs":1000,"skipFirstNChanges":0,"type":"onchange","sendPolicyMode":""}]},"datalink":{"source":"Prova.123"}}},"version":"1.0.0"}},"label":"","unit":"","description":"","tags":[]},"name":"MapTest","nameRaw":"MapTest","deleted":false,"orgResourceId":"factoryal","creationDate":1745853783372,"updatedAt":1745853783372,"id":"DAJReGRKNn"}]'

        data = json.loads(corvina_str)

        for d in data:
            dm = MappingRoot.from_dict(d)

        self.assertTrue(True)